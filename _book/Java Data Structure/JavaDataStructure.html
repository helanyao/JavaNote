
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Java Data Structure Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../JVM/JVM.html" />
    
    
    <link rel="prev" href="../Concurrent/ThreadPool.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../Fundamental/Fundamental.html">
            
                <a href="../Fundamental/Fundamental.html">
            
                    
                    Fundanmental
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../Fundamental/Upcast&Downcast.html">
            
                <a href="../Fundamental/Upcast&Downcast.html">
            
                    
                    Upcast & Downcast
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../Fundamental/EqualsOfString.html">
            
                <a href="../Fundamental/EqualsOfString.html">
            
                    
                    Rewrite Equals() of String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../Fundamental/String.html">
            
                <a href="../Fundamental/String.html">
            
                    
                    String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../Fundamental/Class.html">
            
                <a href="../Fundamental/Class.html">
            
                    
                    Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../Fundamental/Serializable.html">
            
                <a href="../Fundamental/Serializable.html">
            
                    
                    Serializable
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Advanced/Advanced.html">
            
                <a href="../Advanced/Advanced.html">
            
                    
                    Advanced
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../Advanced/ClassLoader.html">
            
                <a href="../Advanced/ClassLoader.html">
            
                    
                    Class Loader
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Concurrent/Concurrent.html">
            
                <a href="../Concurrent/Concurrent.html">
            
                    
                    Concurrent
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../Concurrent/AQS.html">
            
                <a href="../Concurrent/AQS.html">
            
                    
                    AQS(AbstractQueuedSynchronizer)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Concurrent/CAS.html">
            
                <a href="../Concurrent/CAS.html">
            
                    
                    CAS(Compare and Swap)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../Concurrent/CLH.html">
            
                <a href="../Concurrent/CLH.html">
            
                    
                    CLH(Craig, Landin, and Hagersten)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../Concurrent/ReentrantLock.html">
            
                <a href="../Concurrent/ReentrantLock.html">
            
                    
                    ReentrantLock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../Concurrent/Synchronized.html">
            
                <a href="../Concurrent/Synchronized.html">
            
                    
                    Synchronized
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../Concurrent/ConcurrentHashMap.html">
            
                <a href="../Concurrent/ConcurrentHashMap.html">
            
                    
                    ConcurrentHashMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../Concurrent/ThreadPool.html">
            
                <a href="../Concurrent/ThreadPool.html">
            
                    
                    ThreadPool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="JavaDataStructure.html">
            
                <a href="JavaDataStructure.html">
            
                    
                    Java Data Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../JVM/JVM.html">
            
                <a href="../JVM/JVM.html">
            
                    
                    JVM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../JVM/GarbageCollector.html">
            
                <a href="../JVM/GarbageCollector.html">
            
                    
                    Garbage Collector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../JVM/MemoryManagement.html">
            
                <a href="../JVM/MemoryManagement.html">
            
                    
                    Memory Management
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Java Data Structure</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="java-data-structure">Java Data Structure</h1>
<h2 id="1-priorityqueue">1. PriorityQueue</h2>
<ul>
<li>introduced in Java 1.5 and part of Collections Framework.</li>
<li>it is an unbounded queue based on a priority heap and we can specify the initial capacity.</li>
<li>the elements are ordered by default in natural order or we can provide a Comparator for ordering at the time of instantiation of queue.</li>
<li>doesn&#x2019;t allow null values and we can&#x2019;t create PriorityQueue of Objects that are non-comparable.</li>
<li>not thread safe or we can use PriorityBlockingQueue.</li>
<li><em>O(log(n))</em> for enqueing and dequeing; <em>O(nlog(n))</em> to go through the entire queue</li>
<li>the provided <code>iterator()</code> is not guaranteed to traverse the elements in any particular order</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>{
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> population;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">test</span><span class="hljs-params">(String name, <span class="hljs-keyword">int</span> population)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">this</span>.population = population;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>{
         <span class="hljs-keyword">return</span> getName() + <span class="hljs-string">&quot; - &quot;</span> + getPopulation();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span></span>{
        Comparator&lt;test&gt; OrderIsdn =  <span class="hljs-keyword">new</span> Comparator&lt;test&gt;(){
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(test o1, test o2)</span> </span>{
                <span class="hljs-keyword">int</span> numbera = o1.getPopulation();
                <span class="hljs-keyword">int</span> numberb = o2.getPopulation();
                <span class="hljs-keyword">if</span>(numberb &gt; numbera) {
                    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
                }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(numberb&lt;numbera) {
                    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
                }<span class="hljs-keyword">else</span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
                }
            }   
        };
        Queue&lt;test&gt; priorityQueue =  <span class="hljs-keyword">new</span> PriorityQueue&lt;test&gt;(<span class="hljs-number">11</span>,OrderIsdn);

        test t1 = <span class="hljs-keyword">new</span> test(<span class="hljs-string">&quot;t1&quot;</span>,<span class="hljs-number">1</span>);
        test t3 = <span class="hljs-keyword">new</span> test(<span class="hljs-string">&quot;t3&quot;</span>,<span class="hljs-number">3</span>);
        test t2 = <span class="hljs-keyword">new</span> test(<span class="hljs-string">&quot;t2&quot;</span>,<span class="hljs-number">2</span>);
        test t4 = <span class="hljs-keyword">new</span> test(<span class="hljs-string">&quot;t4&quot;</span>,<span class="hljs-number">0</span>);
        priorityQueue.add(t1);
        priorityQueue.add(t3);
        priorityQueue.add(t2);
        priorityQueue.add(t4);
        System.out.println(priorityQueue.poll().toString());
    }
}
</code></pre>
<h2 id="2--arraylist-vs-vector">2.  ArrayList vs Vector</h2>
<p>ArrayList and Vector are similar classes in many ways:</p>
<ol>
<li>Both are index based and backed up by an array internally. </li>
<li>The iterator implementations of ArrayList and Vector both are fail-fast by design. </li>
<li>ArrayList and Vector both allows null values and random access to element using index number. </li>
</ol>
<p>These are the differences between ArrayList and Vector:</p>
<ol>
<li>Vector is synchronized whereas ArrayList is not synchronized. </li>
<li>ArrayList is faster than Vector because it doesn&#x2019;t have any overhead because of synchronization. </li>
<li>&#x6570;&#x636E;&#x589E;&#x957F;:&#x5F53;&#x9700;&#x8981;&#x589E;&#x957F;&#x65F6;,Vector&#x9ED8;&#x8BA4;&#x589E;&#x957F;&#x539F;&#x6765;&#x4E00;&#x57F9;&#xFF0C;&#x800C;ArrayList&#x662F;&#x539F;&#x6765;&#x4E00;&#x534A; </li>
</ol>
<h2 id="3-array-vs-arraylist">3. Array vs ArrayList</h2>
<ol>
<li>Arrays can contain primitive or Objects whereas ArrayList can contain only Objects. </li>
<li>Arrays are fixed size whereas ArrayList size is dynamic. </li>
<li>Arrays doesn&#x2019;t provide a lot of features like ArrayList, such as addAll, removeAll, iterator etc.</li>
<li>For list of primitive data types, although Collections use autoboxing to reduce the coding effort but still it makes them slow when working on fixed size primitive data types. </li>
<li>If you are working on fixed multi-dimensional situation, using <code>[][]</code> is far more easier than <code>List&lt;List&lt;&gt;&gt;</code>.</li>
</ol>
<h2 id="4-java&#x96C6;&#x5408;&#x7C7B;&#x6846;&#x67B6;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;">4. Java&#x96C6;&#x5408;&#x7C7B;&#x6846;&#x67B6;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;</h2>
<ul>
<li>&#x6839;&#x636E;&#x9700;&#x8981;&#x6B63;&#x786E;&#x9009;&#x62E9;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x96C6;&#x5408;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x5047;&#x5982;&#x5143;&#x7D20;&#x5927;&#x5C0F;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x4E14;&#x80FD;&#x4E8B;&#x5148;&#x77E5;&#x9053;&#xFF0C;&#x7528;Array&#x800C;&#x4E0D;&#x662F;ArrayList&#x3002;</li>
<li>&#x4E3A;&#x4E86;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#xFF0C;&#x53EF;&#x8BFB;&#x6027;&#x548C;&#x5065;&#x58EE;&#x6027;&#x7684;&#x539F;&#x56E0;&#x603B;&#x662F;&#x8981;&#x4F7F;&#x7528;&#x6CDB;&#x578B;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x6CDB;&#x578B;&#x8FD8;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8FD0;&#x884C;&#x65F6;&#x7684;<code>ClassCastException</code>&#x3002;</li>
<li>&#x4F7F;&#x7528;JDK&#x63D0;&#x4F9B;&#x7684;&#x4E0D;&#x53D8;&#x7C7B;immutable class(<code>String</code>, <code>Integer</code>)&#x4F5C;&#x4E3A;<code>Map</code>&#x7684;&#x952E;&#x53EF;&#x4EE5;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x7C7B;&#x5B9E;&#x73B0;<code>hashCode()</code>&#x548C;<code>equals()</code>&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<h2 id="5-why-the-key-should-be-immutable-in-hashmap">5. why the key should be immutable in HashMap?</h2>
<p>String, Integer and other wrapper classes are natural candidates of HashMap key, and String is most frequently used key as well because String is immutable and final, and overrides <code>equals()</code> and <code>hashcode()</code> method. Immutabiility is required, in order to prevent changes on fields used to calculate <code>hashCode()</code> because if key object return different hashCode during insertion and retrieval than it won&apos;t be possible to get object from HashMap. </p>
<p>Immutability is best as it offers other advantages as well like thread-safety. If you can keep your hashCode same by only making certain fields final, then you go for that as well. And immutable object is also free of cache.</p>
<p>On runtime, JVM computes hash code for each object and provide it on demand. When we modify an object&#x2019;s state, JVM set a flag that object is modified and hash code must be AGAIN computed. So, next time you call object&#x2019;s hashCode() method, JVM recalculate the hash code for that object.</p>
<p>For this basic reasoning, key objects are suggested to be IMMUTABLE. IMMUTABILITY allows you to get same hash code every time, for a key object. </p>
<h2 id="6--hash-performance">6.  Hash Performance</h2>
<p>Hash tables are <em>O(1)</em> average and amortized case complexity. </p>
<p>Hash tables suffer from <em>O(n)</em> worst time complexity due to two reasons:</p>
<ol>
<li>If too many elements were hashed into the same key: looking inside this key may take <em>O(n)</em> time.</li>
<li>Once a hash table has passed its load balance - it has to rehash.</li>
</ol>
<p>The rehash operation, which is <em>O(n)</em>, can at most happen after <em>n/2</em> ops, which are all assumed <em>O(1)</em>. Thus when you sum the average time per op, you get : <em>(n * O(1) + O(n)) / n) = O(1)</em>.</p>
<p>Another issue is due to cache performance. Hash Tables suffer from bad cache performance, and thus for large collection - the access time might take longer, since you need to reload the relevant part of the table from the memory back into the cache.</p>
<h2 id="7-hash&#x51B2;&#x7A81;">7. Hash&#x51B2;&#x7A81;</h2>
<p>&#x3000;&#x3000;&#x5F53;&#x5173;&#x952E;&#x5B57;&#x503C;&#x4E0D;&#x540C;&#x7684;&#x5143;&#x7D20;&#x6620;&#x8C61;&#x5230;&#x54C8;&#x5E0C;&#x8868;&#x540C;&#x4E00;&#x5730;&#x5740;&#x4E0A;&#xFF0C;&#x5373;<em>k1 &#x2260; k2</em>&#xFF0C;&#x4F46;<em>Hash(k1) = Hash(k2)</em>&#xFF0C;&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#x79F0;&#x4E3A;&#x51B2;&#x7A81;&#x3002;</p>
<p>&#x3000;&#x3000;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li><p>&#x6570;&#x5B57;&#x5206;&#x6790;&#x6CD5;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6709;80&#x4E2A;&#x8BB0;&#x5F55;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x4E3A;8&#x4F4D;&#x5341;&#x8FDB;&#x5236;&#x6574;&#x6570;d1d2d3&#x2026;d7d8&#xFF0C;&#x5982;&#x54C8;&#x5E0C;&#x8868;&#x957F;&#x53D6;100&#xFF0C;&#x5219;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x4E3A;00~99&#x3002;&#x5047;&#x8BBE;&#x7ECF;&#x8FC7;&#x5206;&#x6790;&#xFF0C;&#x5404;&#x5173;&#x952E;&#x5B57;&#x4E2D; d4&#x548C;d7&#x7684;&#x53D6;&#x503C;&#x5206;&#x5E03;&#x8F83;&#x5747;&#x5300;&#xFF0C;&#x5219;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x4E3A;<em>hash(key) = hash(d1d2d3&#x2026;d7d8) = d4d7</em>&#x3002;&#x4F8B;&#x5982;&#xFF0C;h(81346532) = 43&#xFF0C;h(81301367) = 06&#x3002;</p>
</li>
<li><p>&#x5E73;&#x65B9;&#x53D6;&#x4E2D;&#x3002;&#x5148;&#x6C42;&#x51FA;&#x5173;&#x952E;&#x5B57;&#x7684;&#x5E73;&#x65B9;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x6309;&#x9700;&#x8981;&#x53D6;&#x5E73;&#x65B9;&#x503C;&#x7684;&#x4E2D;&#x95F4;&#x51E0;&#x4F4D;&#x4F5C;&#x4E3A;&#x54C8;&#x5E0C;&#x5730;&#x5740;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5E73;&#x65B9;&#x540E;&#x4E2D;&#x95F4;&#x51E0;&#x4F4D;&#x548C;&#x5173;&#x952E;&#x5B57;&#x4E2D;&#x6BCF;&#x4E00;&#x4F4D;&#x90FD;&#x76F8;&#x5173;&#xFF0C;&#x6545;&#x4E0D;&#x540C;&#x5173;&#x952E;&#x5B57;&#x4F1A;&#x4EE5;&#x8F83;&#x9AD8;&#x7684;&#x6982;&#x7387;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x54C8;&#x5E0C;&#x5730;&#x5740;&#x3002;</p>
</li>
<li><p>&#x9664;&#x7559;&#x4F59;&#x6570;&#x6CD5;&#x3002;&#x5DF2;&#x77E5;&#x5F85;&#x6563;&#x5217;&#x5143;&#x7D20;&#x4E3A;<em>(18&#xFF0C;75&#xFF0C;60&#xFF0C;43&#xFF0C;54&#xFF0C;90&#xFF0C;46)</em>&#xFF0C;&#x8868;&#x957F;<em>m = 10</em>&#xFF0C;<em>p = 7</em>&#xFF0C;&#x5219;&#x6709;<em>h(18) = 18 % 7 = 4</em>, <em>h(75) = 75 % 7 = 5</em>, <em>h(60) = 60 % 7 = 4</em>.   </p>
</li>
</ul>
<p>&#x3000;&#x3000;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#xFF1A;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x518D;&#x6563;&#x5217;&#xFF08;&#x987A;&#x5E8F;&#x67E5;&#x770B;&#x8868;&#x4E2D;&#x4E0B;&#x4E00;&#x5355;&#x5143;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x51FA;&#x4E00;&#x4E2A;&#x7A7A;&#x5355;&#x5143;&#x6216;&#x67E5;&#x904D;&#x5168;&#x8868;&#xFF09;&#xFF1B;&#x4E8C;&#x6B21;&#x63A2;&#x6D4B;&#x518D;&#x6563;&#x5217;&#xFF08;&#x51B2;&#x7A81;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x5728;&#x8868;&#x7684;&#x5DE6;&#x53F3;&#x8FDB;&#x884C;&#x8DF3;&#x8DC3;&#x5F0F;&#x63A2;&#x6D4B;&#xFF09;&#xFF1B;&#x4F2A;&#x968F;&#x673A;&#x63A2;&#x6D4B;&#x518D;&#x6563;&#x5217;</li>
<li>&#x518D;&#x54C8;&#x5E0C;</li>
<li>&#x62C9;&#x94FE;&#x6CD5;</li>
<li>&#x516C;&#x5171;&#x6EA2;&#x51FA;&#x533A;&#xFF1A;&#x5206;&#x4E3A;&#x57FA;&#x672C;&#x8868;&#x548C;&#x6EA2;&#x51FA;&#x8868;&#xFF0C;&#x548C;&#x57FA;&#x672C;&#x8868;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x586B;&#x5165;&#x6EA2;&#x51FA;&#x8868;</li>
<li>JDK&#x4E2D;&#x7684;&#x6269;&#x5C55;hash</li>
</ul>
<h2 id="8--can-we-use-any-class-as-map-key">8.  Can we use any class as Map key?</h2>
<p>Yes, however following points should be considered:</p>
<ol>
<li>If the class overrides <code>equals()</code>, it should also override <code>hashCode()</code>. </li>
<li>If a class field is not used in <code>equals()</code>, you should not use it in <code>hashCode()</code>. </li>
<li>Best practice for user defined key class is to make it immutable. </li>
</ol>
<h2 id="9-collection-&#x548C;-collections&#x7684;&#x533A;&#x522B;">9. Collection &#x548C; Collections&#x7684;&#x533A;&#x522B;</h2>
<ul>
<li>Collections&#x662F;&#x4E2A;java.util&#x4E0B;&#x7684;&#x7C7B;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x6709;&#x5404;&#x79CD;&#x6709;&#x5173;&#x96C6;&#x5408;&#x64CD;&#x4F5C;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x3002;</li>
<li>Collection&#x662F;&#x4E2A;java.util&#x4E0B;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x662F;&#x5404;&#x79CD;&#x96C6;&#x5408;&#x7ED3;&#x6784;&#x7684;&#x7236;&#x63A5;&#x53E3;&#x3002;</li>
</ul>
<h2 id="10-arraylist&#x7684;fail-fast&#x539F;&#x7406;">10. ArrayList&#x7684;fail-fast&#x539F;&#x7406;</h2>
<p>&#x3000;&#x3000;&#x5982;&#x4E0B;&#x7684;remove&#x65B9;&#x6CD5;:</p>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">remove</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>{
          RangeCheck(index);

          <span class="hljs-comment">// &#x4FEE;&#x6539;modCount</span>
          modCount++;
          E oldValue = (E) elementData[index];

          <span class="hljs-keyword">int</span> numMoved = size - index - <span class="hljs-number">1</span>;
          <span class="hljs-keyword">if</span> (numMoved &gt; <span class="hljs-number">0</span>)
              System.arraycopy(elementData, index+<span class="hljs-number">1</span>, elementData, index, numMoved);
          elementData[--size] = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// Let gc do its work</span>

          <span class="hljs-keyword">return</span> oldValue;
}
</code></pre>
<p>&#x3000;&#x3000;&#x4EE5;&#x53CA;ArrayList&#x7684;Iterator&#xFF08;&#x662F;&#x5728;&#x7236;&#x7C7B;AbstractList&#x5B9E;&#x73B0;&#xFF09;&#x4E3A;&#x4F8B;:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractList</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractCollection</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">E</span>&gt; </span>{
    <span class="hljs-comment">// AbstractList&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x6765;&#x8BB0;&#x5F55;List&#x4FEE;&#x6539;&#x7684;&#x6B21;&#x6570;</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> modCount = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// &#x8FD4;&#x56DE;List&#x5BF9;&#x5E94;&#x8FED;&#x4EE3;&#x5668;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x662F;&#x8FD4;&#x56DE;Itr&#x5BF9;&#x8C61;&#x3002;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title">iterator</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Itr();
    }

    <span class="hljs-comment">// Itr&#x662F;Iterator(&#x8FED;&#x4EE3;&#x5668;)&#x7684;&#x5B9E;&#x73B0;&#x7C7B;</span>
    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Itr</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Iterator</span>&lt;<span class="hljs-title">E</span>&gt; </span>{
        <span class="hljs-keyword">int</span> cursor = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">int</span> lastRet = -<span class="hljs-number">1</span>;

        <span class="hljs-comment">// &#x6BCF;&#x6B21;&#x904D;&#x5386;List&#x4E2D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x90FD;&#x4F1A;&#x6BD4;&#x8F83;expectedModCount&#x548C;modCount&#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF1B;</span>
        <span class="hljs-comment">// &#x82E5;&#x4E0D;&#x76F8;&#x7B49;&#xFF0C;&#x5219;&#x629B;&#x51FA;ConcurrentModificationException&#x5F02;&#x5E38;&#xFF0C;&#x4EA7;&#x751F;fail-fast&#x4E8B;&#x4EF6;&#x3002;</span>
        <span class="hljs-keyword">int</span> expectedModCount = modCount;

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasNext</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> cursor != size();
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">next</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-comment">// &#x83B7;&#x53D6;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E4B;&#x524D;&#xFF0C;&#x90FD;&#x4F1A;&#x5224;&#x65AD;&#x201C;&#x65B0;&#x5EFA;Itr&#x5BF9;&#x8C61;&#x65F6;&#x4FDD;&#x5B58;&#x7684;modCount&#x201D;&#x548C;&#x201C;&#x5F53;&#x524D;&#x7684;modCount&#x201D;&#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF1B;</span>
            <span class="hljs-comment">// &#x82E5;&#x4E0D;&#x76F8;&#x7B49;&#xFF0C;&#x5219;&#x629B;&#x51FA;ConcurrentModificationException&#x5F02;&#x5E38;&#xFF0C;&#x4EA7;&#x751F;fail-fast&#x4E8B;&#x4EF6;&#x3002;</span>
            checkForComodification();
            <span class="hljs-keyword">try</span> {
                E next = get(cursor);
                lastRet = cursor++;
                <span class="hljs-keyword">return</span> next;
            } <span class="hljs-keyword">catch</span> (IndexOutOfBoundsException e) {
                checkForComodification();
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NoSuchElementException();
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">if</span> (lastRet == -<span class="hljs-number">1</span>)
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException();

            checkForComodification();

            <span class="hljs-keyword">try</span> {
                AbstractList.<span class="hljs-keyword">this</span>.remove(lastRet);
                <span class="hljs-keyword">if</span> (lastRet &lt; cursor)
                    cursor--;
                lastRet = -<span class="hljs-number">1</span>;
                expectedModCount = modCount;
            } <span class="hljs-keyword">catch</span> (IndexOutOfBoundsException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ConcurrentModificationException();
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkForComodification</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">if</span> (modCount != expectedModCount)
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ConcurrentModificationException();
        }
    }
    ...
}
</code></pre>
<h2 id="11-&#x4E3A;&#x4F55;iterator&#x63A5;&#x53E3;&#x6CA1;&#x6709;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#xFF1F;">11. &#x4E3A;&#x4F55;Iterator&#x63A5;&#x53E3;&#x6CA1;&#x6709;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#xFF1F;</h2>
<p>&#x3000;&#x3000;Iterator&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x4E86;&#x904D;&#x5386;&#x96C6;&#x5408;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x5219;&#x662F;&#x96C6;&#x5408;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x8D23;&#x4EFB;&#x3002;&#x6BCF;&#x4E2A;&#x80FD;&#x591F;&#x8FD4;&#x56DE;&#x7528;&#x4E8E;&#x904D;&#x5386;&#x7684;Iterator&#x7684;&#x96C6;&#x5408;&#x7C7B;&#x90FD;&#x6709;&#x5B83;&#x81EA;&#x5DF1;&#x7684;Iterator&#x5B9E;&#x73B0;&#x5185;&#x90E8;&#x7C7B;&#x3002;</p>
<p>&#x3000;&#x3000;&#x8FD9;&#x5C31;&#x5141;&#x8BB8;&#x96C6;&#x5408;&#x7C7B;&#x53BB;&#x9009;&#x62E9;&#x8FED;&#x4EE3;&#x5668;&#x662F;fail-fast&#x8FD8;&#x662F;fail-safe&#x7684;&#x3002;&#x6BD4;&#x5982;&#xFF0C;ArrayList&#x8FED;&#x4EE3;&#x5668;&#x662F;fail-fast&#x7684;&#xFF0C;&#x800C;CopyOnWriteArrayList&#x8FED;&#x4EE3;&#x5668;&#x662F;fail-safe&#x7684;</p>
<h2 id="12-collection-hierarchy">12. Collection Hierarchy</h2>
<p><img src="Images/collection_hierarchy.png" alt="Collection Hierarchy"></p>
<h2 id="13-what-is-difference-between-fail-fast-and-fail-safe">13. What is difference between fail-fast and fail-safe?</h2>
<p>Fail-safe iterators are opposite to fail-fast. They never fail if you modify the underlying collection on which they are iterating, because they work on clone of Collection instead of original collection and that&#x2019;s why they are called as fail-safe iterator.</p>
<p>Iterator of CopyOnWriteArrayList is an example of fail-safe Iterator also iterator written by ConcurrentHashMap keySet is also fail-safe iterator and never throw ConcurrentModificationException.</p>
<h2 id="14-why-need-to-override-hashcode">14. Why need to override hashCode()?</h2>
<p>As much as is reasonably practical, the hashCode method defined by class Object does return distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer)
When an application is executed, the hashcode (an integer) returned for an object should be same till another execution of that application. Now coming to the important point which is the contract between hashCode and equals method, if two objects are equal, that is <code>obj1.equals(obj2)</code> is true then, <code>obj1.hashCode()</code> and <code>obj2.hashCode()</code> must return same integer.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../Concurrent/ThreadPool.html" class="navigation navigation-prev " aria-label="Previous page: ThreadPool">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../JVM/JVM.html" class="navigation navigation-next " aria-label="Next page: JVM">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Java Data Structure","level":"1.5","depth":1,"next":{"title":"JVM","level":"1.6","depth":1,"path":"JVM/JVM.md","ref":"JVM/JVM.md","articles":[{"title":"Garbage Collector","level":"1.6.1","depth":2,"path":"JVM/GarbageCollector.md","ref":"JVM/GarbageCollector.md","articles":[]},{"title":"Memory Management","level":"1.6.2","depth":2,"path":"JVM/MemoryManagement.md","ref":"JVM/MemoryManagement.md","articles":[]}]},"previous":{"title":"ThreadPool","level":"1.4.7","depth":2,"path":"Concurrent/ThreadPool.md","ref":"Concurrent/ThreadPool.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Java Data Structure/JavaDataStructure.md","mtime":"2016-11-18T13:51:58.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-12-03T11:01:22.920Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

